<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Rock Paper Scissors Simulation</title>
  <link rel="stylesheet" href="style.css">
</head>
  <main>
    <!--Title -->
    <header>
      <h1>Oscar's Rock Paper Scissors Simulator</h1>
      <p>
        This website is made to simulate a game of rock, paper, scissors with
        a computer.
        <br>
        Best out of 5 display.
      </p>
    </header>

    <!-- selection -->
    <div id = "container">
      <h2>Please Select a choice below</h2>
      <section id = "selections">
        <div id = "RockSelection">
          <img src = "https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcTxAaA9XVu96m06DW9wQQ1Q90zZb-s3fIe0Qc8ZCir-ytQ3YsJ1&usqp=CAU">
          <button id = "rock">Rock</button>
        </div>
        <div id = "PaperSelection">
          <img src = "https://image.shutterstock.com/image-vector/stack-white-papers-cartoon-vector-260nw-191773736.jpg">
          <button id = "paper">Paper</button>
        </div>
        <div id = "ScissorSelection">
          <img src = "https://cdn3.vectorstock.com/i/1000x1000/36/57/scissors-cartoon-vector-21843657.jpg">
          <button id = "scissors">Scissors</button>
        </div>
      </section>

    <!-- Results Section -->
      <div id = "Results">
        <h3>Results</h3>
      </div>
    </div>
    <!-- Table cannot use
    <table>
      <tr>
          <th>Round Number</th>
          <th>Your Choice</th>
          <th>Computer Choice</th>
          <th>Win/Lose</th>
      </tr>
    </table>
  -->
  </main>
  <script>
    /*
    Input: none
    Output: string
    simulates rock paper scissors by randomly returning one of the possibilities
    */
    function computerPlay() {
      // generates 0, 1, 2 for 3 choices
      let randSelec = Math.floor(Math.random() * 3);
      if (randSelec == 0) {
        return "Rock";
      }
      else if (randSelec == 1) {
        return "Paper";
      }
      else if (randSelec == 2) {
        return "Scissors";
      }
    }
    //console.log(computerPlay());

    /*
    Input: two strings
    Output: string
    This function simulates the game of rock paper scissors by taking in
    a user's choice in RPS and a computer's choice
    */
    function playRound(playerSelection, computerSelection) {
        playerSelection = playerSelection.toLowerCase();
        computerSelection = computerSelection.toLowerCase();
        //console.log(playerSelection);
        //console.log(computerSelection);
        if (playerSelection == computerSelection) {
          return "It is a tie, " + playerSelection + " can't beat " + computerSelection;
        }
        else if (playerSelection == "rock" && computerSelection == "scissors") {
          return "You win, " + playerSelection + " beats " + computerSelection;
        }
        else if (playerSelection == "rock" && computerSelection == "paper") {
          return "You lose, " + computerSelection + " beats " + playerSelection;
        }
        else if (playerSelection == "paper" && computerSelection == "rock") {
          return "You win, " + playerSelection + " beats " + computerSelection;
        }
        else if (playerSelection == "paper" && computerSelection == "scissors") {
          return "You lose, " + computerSelection + " beats " + playerSelection;
        }
        else if (playerSelection == "scissors" && computerSelection == "paper") {
          return "You win, " + playerSelection + " beats " + computerSelection;
        }
        else if (playerSelection == "scissors" && computerSelection == "rock") {
          return "You lose, " + computerSelection + " beats " + playerSelection;
        }
    }
    // let choice = prompt('Please enter your RPC choice', "rock");
    // console.log(oneRound(choice, computerPlay()));

    /*
    Input: function
    Output: string
    This function simulates 5 games of RPS between a user and computer. It keeps
    a count of the wins and lets you know if you won or not
    */
    function game(playRound) {
      let counter = 0;
    }

    function iterateArr(buttons) {
      for (let i = 0; i < buttons.length; i++) {
        buttons[i].addEventListener('click', assignChoice);
      }
    }

    function assignChoice(e) {
      let choice = this.textContent;
      game(choice);
    }

    function game(choice) {
      let result = playRound(choice, computerPlay());
      //console.log(result);
      resultText.textContent = result;
      results.appendChild(resultText);
      if (result.search("win") != -1) {
        personCounter += 1;
        //console.log(personCounter);
        personScore.textContent = "Your Score: " + personCounter;
        resultText.appendChild(personScore);
      }
      else if (result.search("lose") != -1){
        compCounter += 1;
        //console.log(compCounter);
        compScore.textContent = "Computer Score: " + compCounter;
        resultText.appendChild(compScore);
      }
      if (personCounter == 5) {
        //console.log("You won 5 rounds, congrats!");
        winner.textContent = "You won 5 rounds, congrats!";
      }
      else if (compCounter == 5){
        //console.log("The computer won 5 rounds, better luck next time!");
        winner.textContent = "The computer won 5 rounds, better luck next time!";
      }
      if (personCounter == 5 || compCounter == 5) {
        resultText.appendChild(winner);
        setTimeout(function () {
          alert('Please refresh the page and play again!');
        }, 500);
      }
    }

    let personCounter = 0;
    let compCounter = 0;
    const buttons = document.querySelectorAll('button');
    const results = document.querySelector('#Results');
    // const resultHeader = document.querySelector('h3');
    const resultText = document.createElement('p');
    const personScore = document.createElement('p');
    const compScore = document.createElement('p');
    const winner = document.createElement('p');
    iterateArr(buttons);
  </script>
</html>
